# Deploy Portfolio to GitHub Pages
name: Deploy to GitHub Pages

# Trigger events
on:
  # Cháº¡y khi push vÃ o main branch
  push:
    branches: [main]
  # Cho phÃ©p cháº¡y thá»§ cÃ´ng tá»« Actions tab
  workflow_dispatch:

# Permissions cáº§n thiáº¿t cho GitHub token
permissions:
  contents: write
  pages: write
  id-token: write

# Concurrent deployments
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      # Checkout source code tá»« main branch
      - name: Checkout repository ğŸ›ï¸
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      # Setup Node.js (tÃ¹y chá»n - cÃ³ thá»ƒ bá» qua cho static site)
      - name: Setup Node.js âš™ï¸
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
      
      # Build project (uncomment náº¿u cáº§n build process)
      # - name: Install dependencies ğŸ“¦
      #   run: npm ci
      # 
      # - name: Build project ğŸ”§
      #   run: npm run build
      
      # Deploy lÃªn gh-pages branch (Method 1 - Recommended)
      - name: Deploy to gh-pages branch ğŸš€
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: .
          publish_branch: gh-pages
          force_orphan: true
          user_name: 'github-actions[bot]'
          user_email: 'github-actions[bot]@users.noreply.github.com'
          commit_message: 'Deploy portfolio from ${{ github.sha }}'
          
      # Alternative deployment method (comment out above and uncomment this if needed)
      # - name: Deploy to gh-pages branch (Alternative) ğŸš€
      #   uses: JamesIves/github-pages-deploy-action@v4
      #   with:
      #     branch: gh-pages
      #     folder: .
      #     clean: true
      #     single-commit: true
      #     commit-message: 'Deploy from main: ${{ github.sha }}'

# Workflow nÃ y sáº½:
# 1. Checkout code tá»« main branch
# 2. Setup Node.js environment (optional)
# 3. Build project náº¿u cáº§n (hiá»‡n táº¡i skip vÃ¬ lÃ  static site)
# 4. Táº¡o/cáº­p nháº­t nhÃ¡nh gh-pages
# 5. Copy toÃ n bá»™ files vÃ o gh-pages branch
# 6. Commit vÃ  push lÃªn gh-pages branch
# 7. GitHub Pages sáº½ serve website tá»« gh-pages branch
